---
title: "p8105_hw2_jl6521"
author: "Jiayi"
date: "2024-09-25"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

## Problem 1: dataset description

Description of the dataset: 

* The dataset contains the station's name, location (its latitude and longitude), routes served in each stations, whether there are vendings, entrance type, and ada. 
* Data cleaning: So far I convert the entry variable from character to logical variable; clean the column names of the dataset. The dimension of the dataset is 1868 observations with 19 columns. 

```{r problem1-1}
nyc_transit = 
  read_csv("/Users/aimly/Documents/Columbia/2024 Fall/BIST8105/p8105_hw2_jl6521/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  mutate(
    entry = case_match(
      entry,
      "YES" ~ TRUE,
      "NO" ~ FALSE
    )) %>%
  mutate(
    nyc_transit, route8 = as.character(route8)
  ) %>% 
  mutate(
    nyc_transit, route9 = as.character(route9)
  ) %>% 
  select(line, station_name, station_latitude, station_longitude, starts_with("route"), entry, vending, entrance_type, ada)
  
```

* There are 465 distinct stations. 
* There are 468 stations that are ADA compliant. 
* The proportion of station entrances / exits without vending allow entrance is `proportion`. 
```{r problem1-2}
nyc_transit[["line_name"]] = paste(nyc_transit[["station_name"]], nyc_transit[["line"]], sep = " ")
distinct_station = nrow(distinct(nyc_transit,line_name))
ada_compliant = nrow(filter(nyc_transit, ada == "TRUE"))
no_vending = nrow(filter(nyc_transit, vending == "NO"))
allow_entrance = nrow(filter(nyc_transit, entry == "TRUE"))
proportion = no_vending/allow_entrance
```

* There are `distinct_station` distinct stations serve the A train. 
* Of the stations that serve the A train, `ada_in_A` are ADA compliant.
```{r problem 1-3}
transit_new = 
  nyc_transit %>%
  janitor::clean_names() %>% 
  mutate(across(starts_with("route"),as.character)) %>% 
  pivot_longer(
    cols = starts_with("route"),
    names_to = "route_number", 
    values_to = "route_name"
  ) %>% 
  filter(route_name == "A") %>% 
  distinct(line_name,.keep_all = TRUE )
distinct_station = nrow(transit_new)
ada_in_A = nrow(filter(transit_new, ada == "TRUE"))
```


## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
