p8105_hw2_jl6521
================
Jiayi
2024-09-25

## Problem 1:

Description of the dataset:

- The dataset contains the station’s name, location (its latitude and
  longitude), routes served in each stations, whether there are
  vendings, entrance type, and ada.
- Data cleaning: So far I convert the entry variable from character to
  logical variable; clean the column names of the dataset. The dimension
  of the dataset is 1868 observations with 19 columns.

``` r
nyc_transit = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  mutate(
    entry = case_match(
      entry,
      "YES" ~ TRUE,
      "NO" ~ FALSE
    )) %>%
  select(line, station_name, station_latitude, station_longitude, starts_with("route"), entry, vending, entrance_type, ada)
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

- There are 465 distinct stations.
- There are 468 stations that are ADA compliant.
- The proportion of station entrances / exits without vending allow
  entrance is 0.1044.

``` r
nyc_transit[["line_name"]] = paste(nyc_transit[["station_name"]], nyc_transit[["line"]], sep = " ")
distinct_station = nrow(distinct(nyc_transit,line_name))
ada_compliant = nrow(filter(nyc_transit, ada == "TRUE"))
no_vending = nrow(filter(nyc_transit, vending == "NO"))
allow_entrance = nrow(filter(nyc_transit, entry == "TRUE"))
proportion = no_vending/allow_entrance
```

- There are 465 distinct stations serve the A train.
- Of the stations that serve the A train, 468 are ADA compliant.

``` r
transit_new = 
  nyc_transit %>%
  janitor::clean_names() %>% 
  mutate(across(starts_with("route"),as.character)) %>% 
  pivot_longer(
    cols = starts_with("route"),
    names_to = "route_number", 
    values_to = "route_name"
  ) %>% 
  filter(route_name == "A") %>% 
  distinct(line_name,.keep_all = TRUE )
distinct_station = nrow(transit_new)
ada_in_A = nrow(filter(transit_new, ada == "TRUE"))
```

## Problem 2:

``` r
Mr_Trash_Wheel = read_excel("./data/202409 Trash Wheel Collection Data.xlsx",
                         sheet = "Mr. Trash Wheel",
                         na = c("NA", ".", "")) %>% 
  select(-starts_with("...")) %>%
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(sports_balls = as.integer(sports_balls)) %>%
  mutate(which_trashwheel = "Mr. Trash Wheel") %>%
  mutate(year = as.character(year))
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
Professor_Trash_Wheel = read_excel("./data/202409 Trash Wheel Collection Data.xlsx",
                         sheet = "Professor Trash Wheel",
                         na = c("NA", ".", "")) %>% 
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%   
  mutate(which_trashwheel = "Professor Trash Wheel") %>%
  mutate(year = as.character(year))

Gwynnda_Trash_Wheel = read_excel("./data/202409 Trash Wheel Collection Data.xlsx",
                         sheet = "Gwynnda Trash Wheel",
                         range = "A2:L159",
                         na = c("NA", ".", "")) %>% 
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>% 
  mutate(which_trashwheel = "Gwynnda Trash Wheel") %>%
  mutate(year = as.character(year))

combined_trash_dataset = bind_rows(Mr_Trash_Wheel,Professor_Trash_Wheel,Gwynnda_Trash_Wheel)
nrow_trash = nrow(combined_trash_dataset) 


total_weight = combined_trash_dataset %>% 
  filter(which_trashwheel == "Professor Trash Wheel") %>%
  pull(weight_tons) %>%
  sum(na.rm = TRUE)

total_cigarette = combined_trash_dataset %>% 
  filter(which_trashwheel == "Gwynnda Trash Wheel" & month == "June" & year == 2022) %>%
  pull(cigarette_butts) %>% 
  sum(na.rm = TRUE)
```

Data description: in this combined dataset, there are 927 observations.
Key variables are weight and volume of the trash (weight_tons,
volume_cubic_yards), different categories of trash (plastic_bottles,
polystyrene, cigarette_butts, glass_bottles, plastic_bags, wrappers,
sports_balls), and also the number of Maryland homes that are provided
with electricity.

The total weight of trash collected by Professor Trash Wheel is 246.74.
The total number of cigarette butts collected by Gwynnda in June of 2022
is 18120.

## Problem 3:

``` r
# import and clean bakers data
bakers = read_csv("./data/gbb_datasets/bakers.csv",
                  na = c("NA","",".","N/A")
                  ) %>% 
  janitor::clean_names() %>% 
  mutate(baker=sub(" .*", "", baker_name)) %>% 
  select(-baker_name)
```

    ## Rows: 120 Columns: 5
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (3): Baker Name, Baker Occupation, Hometown
    ## dbl (2): Series, Baker Age
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
# import and clean bakes data
bakes = read_csv("./data/gbb_datasets/bakes.csv",
                   na = c("NA","",".","N/A")) %>% 
  janitor::clean_names() %>% 
  mutate(baker=sub('"Jo"',"Jo",baker))
```

    ## Rows: 548 Columns: 5
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (3): Baker, Signature Bake, Show Stopper
    ## dbl (2): Series, Episode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
# import and clean results data
results = read_csv("./data/gbb_datasets/results.csv",
                   na = c("NA","",".","N/A"),
                   skip = 2) %>% 
  janitor::clean_names()
```

    ## Rows: 1136 Columns: 5
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (2): baker, result
    ## dbl (3): series, episode, technical
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
# combine the three datasets 
bakers_results_df = anti_join(results, bakers, by = c("series", "baker" ))
results_bakers_df = anti_join(results, bakers, by = c("series", "baker" ))
bakers_results = left_join(results, bakers, by = c("series", "baker" ))

final_df = anti_join(bakes, results, by = c("series", "baker", "episode"))
final_df = anti_join(results, bakes, by = c("series", "baker", "episode"))

merged_bake_info = left_join(bakers_results, bakes, by = c("series", "baker", "episode"))%>% 
  arrange(series, episode)





write_csv(merged_bake_info, "./final_baking_dataset.csv")
```

## Describing the data cleaning process:

I cleaned the name of the column names for all three datasets using
`janitor::clean_names()`, changed all the “NA”, “N/A”, and all missing
values to NA using `na = c("NA","",".","N/A")` in `read_csv`. When I did
anti_join, I found that the bakers’ names in bakers are full names.
After comparing the name, I think for the other two sheets, bakers are
only kept with first names. Therefore I changed the “bakers” with only
the first name. I also found that in bakes, some bakers are names “Jo”
with the quotation marks, so I remove it in the bakes document. There
are names in bakers that not appearing in the bakes, names in bakers
that not appearing in the results, or names in the results not appearing
in the bakers, etc.

Briefly discuss the final dataset: My final dataset contains series and
episode, bakers information (name, age, occupation, hometown),
infomation of their bakes (signature bake, technical challenge, and show
stopper), and the final result.

## Reader-friendly table

``` r
table = merged_bake_info %>% 
  filter(series >= 5 & (result == "WINNER" | result == "STAR BAKER")) %>% 
  arrange(series, episode, baker) %>%
  select(series, episode, baker, baker_age,technical, result)
```

1.  Most of people who are star baker or winner are younger than 60
    years old. Only 3 of them are older than 60 years old.
2.  Most people who become winners are star bakers before, but there’s
    one person who becomes winner without being star baker (Rahul),
    which is surprising.
3.  Winners usually have high rank of techinical challenge, but for star
    bakers, the technical score seems to not matter much.

Import, clean, tidy, and organize the viewership data in viewership.csv.
Show the first 10 rows of this dataset. What was the average viewership
in Season 1? In Season 5?

## viewership data

``` r
viewers = read_csv("./data/gbb_datasets/viewers.csv") %>% 
  janitor::clean_names()%>%
  head(10) 
```

    ## Rows: 10 Columns: 11
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (11): Episode, Series 1, Series 2, Series 3, Series 4, Series 5, Series ...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
colnames(viewers) = gsub("series","season", colnames(viewers))

average_viewship_1 =viewers %>% 
  pull(season_1) %>% 
  mean(na.rm= TRUE)

average_viewship_5 =viewers %>% 
  pull(season_5) %>% 
  mean(na.rm= TRUE)
```

The average viewship of the data in Season 1 is 2.77, and the average
viewship of the data in Season 5 is 19.0393.
